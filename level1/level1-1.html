<!DOCTYPE html>
<html lang="en">

<head>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <!-- Bootstrap CSS -->
    <link href="../css/bootstrap.min.css" rel="stylesheet">
    <link href="../css/style.css" rel="stylesheet">
</head>

<body>
    <div class="container-fluid">
        <div class="heading">
            <h1 style="text-align: center;"><a href="../index.html">Programavimo valanda</a></h1>
        </div>
        <div class="progress-container">
            <ul style="text-align: center;">
                <li>
                    <a href="level1-1.html">1</a>
                </li>
                <li>
                    <a href="level1-2.html">2</a>
                </li>
                <li>
                    <a href="">3</a>
                </li>
                <li>
                    <a href="">4</a>
                </li>
                <li>
                    <a href="">5</a>
                </li>
                <li>
                    <a href="">6</a>
                </li>
                <li>
                    <a href="">7</a>
                </li>
            </ul>
        </div>
    </div>
    <div class="container-fluid working-space">
        <div class="row" style="padding: 10px;">
            <div class="col-md-5">
                <h4>Temos pavadinimas</h4></div>
            <div class=" col-md-7" id="task"> Užduoties aprašymas. Užduoties aprašymas. Užduoties aprašymas. Užduoties aprašymas. Užduoties aprašymas.
                <a href="javascript:void(0)" onclick="changeVideo('isnwxt2Z5Dw')">Užduoties video</a> </div>
        </div>
        <div class="row" style="padding: 10px">
            <div class="col-md-6 col-lg-5  ">
                <div id="preview">
                        <div class="flagPart" id="yellow"></div>
                        <div class="flagPart" id="green"></div>
                        <div class="flagPart" id="red"></div>
                </div>
                <div class="button-panel">
                    <button class="button-run btn btn-lg btn-secondary" onclick="runCode()">PALEISTI &#x25BA; </button>
                </div>
                <div class="hint-panel">
                    <ul> Pagalba:
                        <li>
                            <a href="javascript:void(0)" data-toggle="popover" title="HINT1" data-content="Pagalbos tekstas numeris 1. Reikia tramparamparam.">HINT1</a>
                        </li>
                        <li>
                            <a href="javascript:void(0)" data-toggle="popover" title="HINT2" data-content="Pagalbos tekstas numeris 2. Reikia tramparamparam">HINT2</a>
                        </li>
                    </ul>
                </div>
            </div>
            <div class="col-lg-5 col-md-6 col-sm-12" style="padding: 0 ;">
                <div id="blocklyDiv">
                </div>
                <xml id="toolbox" style="display: none">
                    <category name="Logic">
                        <block type="controls_if"></block>
                        <block type="logic_compare"></block>
                        <block type="logic_operation"></block>
                        <block type="logic_negate"></block>
                        <block type="logic_boolean"></block>
                        <block type="nupiesk_veliava">
                            <field name="spalva">geltoną</field>
                            <field name="I/O">išjungti</field>
                        </block>
                    </category>
                    <category name="Loops">
                        <block type="controls_repeat_ext">
                            <value name="TIMES">
                                <block type="math_number">
                                    <field name="NUM">10</field>
                                </block>
                            </value>
                        </block>
                        <block type="controls_whileUntil"></block>
                    </category>
                    <category name="Math">
                        <block type="math_number"></block>
                        <block type="math_arithmetic"></block>
                        <block type="math_single"></block>
                    </category>
                    <category name="Text">
                        <block type="text"></block>
                        <block type="text_length"></block>
                        <block type="text_print"></block>
                    </category>
                </xml>
            </div>
            <div class="col-md-12 col-lg-2" style="height: 70vh;">
                <h5>Javascript kodas: </h5>
                <pre id="content_javascript">
                </pre>
            </div>
        </div>
        <div class="video-modal">
            <div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel">
                <div class="modal-dialog" role="document">
                    <div class="modal-content">
                        <div class="modal-body">
                            <iframe id="iframeYoutube" width="100%" height="315" src="https://www.youtube.com/embed/isnwxt2Z5Dw  " frameborder="0" allowfullscreen></iframe>
                        </div>
                        <div class="modal-footer">
                            <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <!-- Optional JavaScript -->
    <!-- jQuery first, then Popper.js, then Bootstrap JS -->
    <script src="https://code.jquery.com/jquery-3.2.1.slim.min.js" integrity="sha384-KJ3o2DKtIkvYIK3UENzmM7KCkRr/rE9/Qpg6aAZGJwFDMVNA/GpGFF93hXpG5KkN" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.11.0/umd/popper.min.js" integrity="sha384-b/U6ypiBEHpOf/4+1nzFpr53nxSS+GLCkfwBdFNTxtclqqenISfwAzpKaMNFNmj4" crossorigin="anonymous"></script>
    <script src="../js/bootstrap.min.js"></script>
    <script src="../js/blockly_compressed.js"></script>
    <script src="../js/javascript_compressed.js"></script>
    <script src="../js/blocks_compressed.js"></script>
    <script src="../msg/js/lt.js"></script>
    <script src="../js/customBlocks.js">
    </script>
    <script src="../js/draw.js"></script>
    <script>
    var workspace = Blockly.inject('blocklyDiv', {
        toolbox: document.getElementById('toolbox'),
        grid: {
            spacing: 20,
            length: 5,
            colour: '#E1D82C',
            snap: true
        },
        trashcan: true
    });

    function toJavascript(event) {
        var code = Blockly.JavaScript.workspaceToCode(workspace);
        document.getElementById('content_javascript').innerHTML = code;
    }
    workspace.addChangeListener(toJavascript);
    </script>
    <script>
    $(document).ready(function() {
        $('[data-toggle="popover"]').popover();
    });
    </script>
    <script type="text/javascript">
    function runCode() {
        // Generate JavaScript code and run it.
        window.LoopTrap = 1000;
        Blockly.JavaScript.INFINITE_LOOP_TRAP =
            'if (--window.LoopTrap == 0) throw "Infinite loop.";\n';
        var code = Blockly.JavaScript.workspaceToCode(workspace);
        Blockly.JavaScript.INFINITE_LOOP_TRAP = null;
        try {
            eval(code);
        } catch (e) {
            alert(e);
        }
    }
    </script>
    <script type="text/javascript">
    $(document).ready(function() {
        $("#myModal").on("hidden.bs.modal", function() {
            $("#iframeYoutube").attr("src", "#");
        })
    })

    function changeVideo(vId) {
        var iframe = document.getElementById("iframeYoutube");
        iframe.src = "https://www.youtube.com/embed/" + vId;

        $("#myModal").modal("show");
    }
    $(window).on('load', function() {
        $('#myModal').modal('show');
    });
    </script>
</body>

</html>